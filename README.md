# üéì Microclimate Monitoring System - Diploma Project

**–î–∏–ø–ª–æ–º–Ω—ã–π –ø—Ä–æ–µ–∫—Ç:** –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –º–∏–∫—Ä–æ–∫–ª–∏–º–∞—Ç–∞ —Å NLP-–∞–Ω–∞–ª–∏–∑–æ–º –∞–Ω–æ–º–∞–ª–∏–π –¥–∞—Ç—á–∏–∫–æ–≤ –∏ –≥–æ–ª–æ—Å–æ–≤—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º.

---

## üèÜ 4 –ö—Ä–∏—Ç–µ—Ä–∏—è –î–∏–ø–ª–æ–º–Ω–æ–π –†–∞–±–æ—Ç—ã (–ø–æ 25% –∫–∞–∂–¥—ã–π)

### **–ö–†–ò–¢–ï–†–ò–ô 1: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã** ‚úÖ
- **–ó–∞–¥–∞—á–∞:** –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–∫—Ä–æ–∫–ª–∏–º–∞—Ç–æ–º —Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
- **–†–µ—à–µ–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∞–Ω–æ–º–∞–ª–∏–∏ –≤ –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å —Ü–µ–ª–µ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –ú–µ—Ö–∞–Ω–∏–∑–º –∞–≤—Ç–æ–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ü–µ–ª–µ–≤–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é
- **–§–∞–π–ª—ã:**
  - `intelligent_recommendation_engine.py` (652 —Å—Ç—Ä–æ–∫)
  - API endpoint: `POST /api/recommendations/generate`

### **–ö–†–ò–¢–ï–†–ò–ô 2: –î–≤–∞ –∏ –±–æ–ª–µ–µ NLP –º–æ–¥–µ–ª–∏** ‚úÖ
- **–ó–∞–¥–∞—á–∞:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ –∞–Ω–∞–ª–∏–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤
- **–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã (3):**
  1. Moving Average Detector - —Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
  2. Isolation Forest - ML-based –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤—ã–±—Ä–æ—Å–æ–≤
  3. Seasonal Decomposition - –∞–Ω–∞–ª–∏–∑ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- **–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä –º–µ—Ç–æ–¥—ã (3):**
  1. Time Series with Attention - –≤–Ω–∏–º–∞–Ω–∏–µ –∏ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
  2. Trend Analysis - –∞–Ω–∞–ª–∏–∑ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è
  3. Ensemble Detector - –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –≤—Å–µ –º–µ—Ç–æ–¥—ã
- **–§–∞–π–ª—ã:**
  - `anomaly_detection_classical.py` (661 —Å—Ç—Ä–æ–∫)
  - `anomaly_detection_transformer.py` (509 —Å—Ç—Ä–æ–∫)
  - API endpoint: `GET /api/sensors/{sensor_id}/anomalies`

### **–ö–†–ò–¢–ï–†–ò–ô 3: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö –∏ –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä –º–æ–¥–µ–ª–µ–π** ‚úÖ
- **–ó–∞–¥–∞—á–∞:** –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤
- **–ú–µ—Ç—Ä–∏–∫–∏:**
  - –°–æ–≥–ª–∞—Å–∏–µ –º–æ–¥–µ–ª–µ–π (models_agreement)
  - –û—Ü–µ–Ω–∫–∏ –∞–Ω–æ–º–∞–ª–∏–∏ (anomaly scores)
  - –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ (confidence)
  - –ö–æ–Ω—Å–µ–Ω—Å—É—Å —Ä–µ—à–µ–Ω–∏–µ (consensus anomaly detection)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –¢–∞–±–ª–∏—Ü–∞ `AnomalyAnalysis` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- **API endpoint:** `GET /api/diploma/analysis-stats`

### **–ö–†–ò–¢–ï–†–ò–ô 4: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏** ‚úÖ
- **–ó–∞–¥–∞—á–∞:** –ì–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** Whisper –æ—Ç OpenAI –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
  - ‚úì Confirm / –î–∞ - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
  - ‚úì Reject / –ù–µ—Ç - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
  - ‚úì Modify / –ò–∑–º–µ–Ω–∏—Ç—å - –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Ü–µ–ª–µ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
  - ‚úì Request Info - –∑–∞–ø—Ä–æ—Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–Ω–æ–º–∞–ª–∏–∏
  - ‚úì Request Report - –∑–∞–ø—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç—á–µ—Ç–∞
- **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å:** –†—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
- **–§–∞–π–ª—ã:**
  - `voice_notification_commands.py` (450+ —Å—Ç—Ä–æ–∫)
  - API endpoint: `POST /api/voice/notification-command`

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.8+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 3.11)
- CUDA (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è Transformer –º–æ–¥–µ–ª–µ–π)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**macOS/Linux:**
```bash
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

**Windows:**
```bash
python -m venv .venv
.venv\Scripts\activate
pip install -r requirements.txt
```

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç—Å—è:
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `sql_app.db`
- ‚úÖ –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã (–≤–∫–ª—é—á–∞—è –Ω–æ–≤—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞)
- ‚úÖ –ü–∞–ø–∫–∞ `reports/` –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤

**Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω:** http://127.0.0.1:8000/docs

### 3. –ù–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

–ß–µ—Ä–µ–∑ Swagger UI –∏–ª–∏ curl:
```bash
curl -X POST http://127.0.0.1:8000/api/seed_data
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:
- 3 –∫–∞–±–∏–Ω–µ—Ç–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ (server_room, data_center, office)
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã–µ –∏ –≤–ª–∞–∂–Ω–æ—Å—Ç–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏
- 24 —á–∞—Å–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–∞—Ç—á–∏–∫–∞
- –¢–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 4. –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ –¥–∞—Ç—á–∏–∫–æ–≤

–û—Ç–∫—Ä–æ–π—Ç–µ `simulator.py` –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π:
```python
BASE_URL = "http://127.0.0.1:8000"
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–º—É–ª—è—Ç–æ—Ä:
```bash
python simulator.py
```

–°–∏–º—É–ª—è—Ç–æ—Ä –±—É–¥–µ—Ç –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –¥–∞—Ç—á–∏–∫–æ–≤.

---

## üéì –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø API

### –ê–Ω–∞–ª–∏–∑ –∞–Ω–æ–º–∞–ª–∏–π (CRITERION 2&3)

```bash
# –ê–Ω–∞–ª–∏–∑ –¥–∞—Ç—á–∏–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö + Transformer –º–µ—Ç–æ–¥–æ–≤
curl -X GET "http://127.0.0.1:8000/api/sensors/1/anomalies?days=7"

# –û—Ç–≤–µ—Ç:
{
  "sensor_id": 1,
  "sensor_name": "Server Room Temperature",
  "measurements_count": 168,
  "analysis": {
    "classical": {
      "is_anomaly": true,
      "score": 0.78,
      "description": "Temperature significantly above normal range",
      "method": "moving_average + isolation_forest + seasonal"
    },
    "transformer": {
      "is_anomaly": true,
      "score": 0.82,
      "reconstruction_error": 0.15,
      "trend_info": {"direction": "up", "acceleration": 0.05},
      "models_agree": true
    },
    "comparison": {
      "models_agree": true,
      "consensus_is_anomaly": true,
      "agreement_score": 0.95,
      "analysis_id": 123
    }
  }
}
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (CRITERION 1)

```bash
# –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ª–æ–∫–∞—Ü–∏–∏
curl -X POST "http://127.0.0.1:8000/api/recommendations/generate" \
  -H "Content-Type: application/json" \
  -d '{"location_id": 1, "only_anomalies": true}'

# –û—Ç–≤–µ—Ç:
{
  "location_id": 1,
  "location_name": "Server Room",
  "recommendations_count": 2,
  "recommendations": [
    {
      "sensor_name": "Temperature",
      "problem_description": "Temperature is 28.5¬∞C, 3.5¬∞C above normal range (18-25¬∞C for server room)",
      "recommended_action": "Activate air conditioning or improve cooling system",
      "target_value": 22.0,
      "severity": "high",
      "priority": 5,
      "confidence": 0.92,
      "reasoning": "High temperature can damage server equipment. Estimated time to target: 15 minutes",
      "recommendation_id": 456
    },
    {
      "sensor_name": "Humidity",
      "problem_description": "Humidity is 82%, risk of condensation formation (dew point warnings)",
      "recommended_action": "Activate dehumidifier immediately, ensure air circulation",
      "target_value": 45.0,
      "severity": "critical",
      "priority": 5,
      "confidence": 0.88,
      "reasoning": "Humidity above 80% creates condensation risk. Hardware protection critical",
      "recommendation_id": 457
    }
  ]
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥ (CRITERION 4)

```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º
curl -X POST "http://127.0.0.1:8000/api/voice/notification-command" \
  -H "Content-Type: application/json" \
  -d '{
    "audio_file_path": "/path/to/command.wav",
    "notification_id": 1,
    "sensor_id": 1
  }'

# –û—Ç–≤–µ—Ç:
{
  "success": true,
  "command": "confirm",
  "confidence_speech": 0.98,
  "confidence_command": 0.95,
  "transcript": "–¥–∞, —Å–æ–≥–ª–∞—Å–µ–Ω, —Ä–µ–∞–ª–∏–∑—É–π —ç—Ç–æ",
  "detected_language": "ru",
  "action_taken": "Recommendation confirmed, implementing changes",
  "voice_command_id": 789,
  "notification_id": 1
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏–ø–ª–æ–º–Ω–æ–π —Ä–∞–±–æ—Ç—ã (DIPLOMA STATS)

```bash
# –ü–æ–ª—É—á–∏—Ç—å –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Å–µ–º 4 –∫—Ä–∏—Ç–µ—Ä–∏—è–º
curl -X GET "http://127.0.0.1:8000/api/diploma/analysis-stats?location_id=1"

# –û—Ç–≤–µ—Ç:
{
  "diploma_criteria": {
    "criterion_1_practical_problem": {
      "status": "‚úÖ IMPLEMENTED",
      "description": "Proactive microclimate monitoring with intelligent recommendations",
      "metrics": {
        "total_recommendations": 42,
        "avg_confidence": 0.89,
        "by_severity": {
          "critical": 5,
          "high": 12,
          "medium": 18,
          "low": 7
        }
      }
    },
    "criterion_2_nlp_models": {
      "status": "‚úÖ IMPLEMENTED",
      "description": "NLP for time series analysis - Classical and Transformer methods",
      "classical_methods": ["moving_average", "isolation_forest", "seasonal_decomposition"],
      "transformer_methods": ["time_series_attention", "trend_analysis", "ensemble"],
      "metrics": {
        "total_analyses": 156,
        "classical_anomalies_detected": 34,
        "transformer_anomalies_detected": 38
      }
    },
    "criterion_3_model_comparison": {
      "status": "‚úÖ IMPLEMENTED",
      "description": "Comparison of classical vs Transformer models for anomaly detection",
      "metrics": {
        "total_comparisons": 156,
        "model_agreements": 142,
        "agreement_rate": 0.91,
        "avg_agreement_score": 0.87
      }
    },
    "criterion_4_speech_recognition": {
      "status": "‚úÖ IMPLEMENTED",
      "description": "Speech recognition with Whisper for notification management",
      "metrics": {
        "total_voice_commands": 28,
        "commands_by_type": {
          "confirm": 12,
          "reject": 5,
          "modify": 6,
          "request_info": 3,
          "request_report": 2,
          "unknown": 0
        }
      }
    }
  }
}
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
diploma-project/
‚îú‚îÄ‚îÄ main.py                              # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (759 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ database.py                          # SQLite –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ models.py                            # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ schemas.py                           # Pydantic —Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ crud.py                              # CRUD —Ñ—É–Ω–∫—Ü–∏–∏ (450+ —Å—Ç—Ä–æ–∫)
‚îÇ
‚îú‚îÄ‚îÄ anomaly_detection_classical.py       # CRITERION 2: –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã (661 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ anomaly_detection_transformer.py     # CRITERION 2: –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä –º–µ—Ç–æ–¥—ã (509 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ intelligent_recommendation_engine.py # CRITERION 1: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (652 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ voice_notification_commands.py       # CRITERION 4: –ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã (450+ —Å—Ç—Ä–æ–∫)
‚îÇ
‚îú‚îÄ‚îÄ diploma_analysis.ipynb               # Jupyter notebook —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
‚îú‚îÄ‚îÄ simulator.py                         # –°–∏–º—É–ª—è—Ç–æ—Ä IoT –¥–∞—Ç—á–∏–∫–æ–≤
‚îú‚îÄ‚îÄ speech_recognition.py                # Legacy –º–æ–¥—É–ª—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏
‚îÇ
‚îú‚îÄ‚îÄ requirements.txt                     # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ sql_app.db                          # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ reports/                            # –ü–∞–ø–∫–∞ —Å –æ—Ç—á—ë—Ç–∞–º–∏ (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

---

## üîå –ö–õ–Æ–ß–ï–í–´–ï –ù–û–í–´–ï API –≠–ù–î–ü–û–ò–ù–¢–´

### –ê–Ω–∞–ª–∏–∑ –∞–Ω–æ–º–∞–ª–∏–π (CRITERION 2&3)
```
GET /api/sensors/{sensor_id}/anomalies?days=7
```
–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∞—Ç—á–∏–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º 6 –º–µ—Ç–æ–¥–æ–≤ (3 –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö + 3 —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä), —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (CRITERION 1)
```
POST /api/recommendations/generate
```
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å —Ü–µ–ª–µ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–æ–º–∞–ª–∏–π.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥ (CRITERION 4)
```
POST /api/voice/notification-command
```
–†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –≥–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ (Whisper + –ø–∞—Ä—Å–µ—Ä –∫–æ–º–∞–Ω–¥).

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏–ø–ª–æ–º–∞
```
GET /api/diploma/analysis-stats?location_id={id}
```
–ü–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Å–µ–º 4 –∫—Ä–∏—Ç–µ—Ä–∏—è–º –¥–∏–ø–ª–æ–º–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

---

## üìä –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### AnomalyAnalysis
–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –∞–Ω–æ–º–∞–ª–∏–π –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π:
```sql
- sensor_id (FK)
- location_id (FK)
- classical_method (String)
- classical_anomaly_score (Float 0-1)
- classical_is_anomaly (Boolean)
- transformer_model (String)
- transformer_anomaly_score (Float 0-1)
- transformer_is_anomaly (Boolean)
- models_agreement (Boolean)  -- —Å–æ–≥–ª–∞—Å–∏–µ –º–æ–¥–µ–ª–µ–π
- confidence (Float 0-1)
- analysis_timestamp
```

### IntelligentRecommendation
–•—Ä–∞–Ω–∏—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
```sql
- sensor_id (FK)
- location_id (FK)
- problem_description (Text)
- recommended_action (Text)
- target_value (Float)  -- CRITICAL –¥–ª—è –∞–≤—Ç–æ–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏!
- reasoning (Text)
- confidence (Float 0-1)
- severity (Enum: low, medium, high, critical)
- priority (Integer 1-5)
- created_at
```

### VoiceNotificationCommand
–ò—Å—Ç–æ—Ä–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥:
```sql
- notification_id (FK)
- transcript (String)
- command (String: confirm, reject, modify, request_info, request_report, unknown)
- execution_status (String)
- execution_timestamp
```

---

## üßπ –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–£–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
rm sql_app.db
```

–ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ —Å–æ–∑–¥–∞—Å—Ç—Å—è –Ω–æ–≤–∞—è –ø—É—Å—Ç–∞—è –±–∞–∑–∞.

---

## ‚ùì –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

**–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ transformers:**
```bash
pip install transformers torch scikit-learn
```

**–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ Whisper:**
```bash
pip install openai-whisper librosa
```

**–ú–æ–¥–µ–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (–ø–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–∫–∞—á–∏–≤–∞–µ—Ç –º–æ–¥–µ–ª–∏)
- –ú–æ–¥–µ–ª–∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ `~/.cache/huggingface/`
- –î–ª—è Transformer —Ç—Ä–µ–±—É–µ—Ç—Å—è 2+ GB —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω SQLAlchemy

**–°–∏–º—É–ª—è—Ç–æ—Ä –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ `http://127.0.0.1:8000`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–ø–æ–ª–Ω–∏–ª–∏ `/api/seed_data` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤

**–ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Whisper: `pip install openai-whisper librosa`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ audio_file_path —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: mp3, wav, m4a, flac)

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–î–∏–ø–ª–æ–º–Ω—ã–π –ø—Ä–æ–µ–∫—Ç - –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –º–∏–∫—Ä–æ–∫–ª–∏–º–∞—Ç–∞
